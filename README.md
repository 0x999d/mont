<p align="center">üåê mont</p>


<p align="center">–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤–µ–± —Å–∞–π—Ç–æ–≤</p>


## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚è± –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–∏—Å–∫–∞ –ª—é–±–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ URL
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥–æ–≤ 
- üìù –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ URL —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- üìâ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- üóÉ –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –≤—Ç–æ—Ä–æ–π —è–≤–ª—è–µ—Ç—Å—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º, –Ω–æ —Å–∏–ª—å–Ω–æ –¥–æ–ø–æ–ª–Ω—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ 

### api/

–°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ `FastAPI`

### telegram-bot/

–ü—Ä–∏–º–µ—Ä –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –±–∞–∑–µ Telegram –±–æ—Ç–∞ ( `aiogram3` ), –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–≥–æ API

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:

- üîÅ –í—Å–µ, —á—Ç–æ –µ—Å—Ç—å –≤ API
- üìä –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ–≤–µ—Ä–æ–∫ –∏ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞
- ‚è± –ü–æ–¥—Å—á—ë—Ç –≤—Ä–µ–º–µ–Ω–∏ uptime –∏ downtime
- üö® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–º–µ–Ω–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –Ω–∞ —Å–∞–π—Ç–µ, –ø–∞–¥–µ–Ω–∏—è—Ö –∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–∏ –≤ –Ω–æ—Ä–º—É
- üì§ –≠–∫—Å–ø–æ—Ä—Ç –∏—Å—Ç–æ—Ä–∏–∏ –≤ `XLSX` —Ñ–æ—Ä–º–∞—Ç

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/0x999d/mont.git
cd mont
```
### 2 –°–æ–∑–¥–∞–Ω–∏–µ RSA –∫–ª—é—á–µ–π –¥–ª—è JWT
```bash
mkdir api/keys
openssl genpkey -algorithm RSA -out api/keys/private.pem -pkeyopt rsa_keygen_bits:2048 

openssl rsa -pubout -in api/keys/private.pem -out api/keys/public.pem
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö API
```bash
export DB_CONNECT_URL=sqlite+aiosqlite:///data.db

sed -i "s/OPENAI_DB_CONNECT_URLAPI_KEY=DB_CONNECT_URL/DB_CONNECT_URL=${DB_CONNECT_URL}/" api/Dockerfile 
```

–î–ª—è –±–æ–ª–µ–µ —Ç–æ–Ω–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
nano api/const.py
```

---

–ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∂–µ–ª–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Å—Ç–∫—É—é —á–∞—Å—Ç—å, –º–æ–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å API –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å  

```bash
cd api
docker build .
docker run -d -p 8080:8080 api
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞
```bash
export TOKEN_TELEGRAM_BOT=your_telegram_token
export CIPHER_KEY=supersecretkey
export DB_CONNECT_URL=sqlite+aiosqlite:///data.db

sed -i "s/TOKEN_TELEGRAM_BOT=TOKEN_TELEGRAM_BOT/TOKEN_TELEGRAM_BOT=${TOKEN_TELEGRAM_BOT}/" telegram-bot/Dockerfile 

sed -i "s/CIPHER_KEY=supersecurekey/CIPHER_KEY=${CIPHER_KEY}/" telegram-bot/Dockerfile 

sed -i "s/DB_CONNECT_URL=DB_CONNECT_URL/DB_CONNECT_URL=${DB_CONNECT_URL}/" telegram-bot/Dockerfile 
```

–î–ª—è –±–æ–ª–µ–µ —Ç–æ–Ω–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
nano telegram-bot/const/conf.py # –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
nano telegram-bot/const/message.py # –û—Ç–≤–µ—Ç—ã –±–æ—Ç–∞
```

### –°–±–æ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```bash
docker compose up -d --build
```

---

## –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### `users`

```markdown
| –ü–æ–ª–µ     | –¢–∏–ø     | –ö–ª—é—á–∏                       |
|----------|---------|-----------------------------|
| username | String  | Primary Key                 |
| password | String  | Not Null                    |
```

---

### `trackedurls`

```markdown
| –ü–æ–ª–µ     | –¢–∏–ø     | –ö–ª—é—á–∏                                                       |
|----------|---------|-------------------------------------------------------------|
| id       | Integer | Primary Key, Auto Increment                                 |
| interval | Integer | Not Null                                                    |
| url      | String  | Not Null                                                    |
| owner    | String  | Foreign Key ‚Üí `users.username`, Not Null, On Delete CASCADE |
```

---

### `trackhistory`

```markdown
| –ü–æ–ª–µ          | –¢–∏–ø      | –ö–ª—é—á–∏                                                           |
|---------------|----------|-----------------------------------------------------------------|
| id            | Integer  | Primary Key, Auto Increment                                     |
| latency       | Float    | Nullable                                                        |
| http_status   | Integer  | Nullable                                                        |
| is_ok         | Boolean  | Not Null, Default = True                                        |
| hash_reqbytes | String   | Nullable                                                        |
| date          | DateTime | Not Null, Default = `datetime.now`                              |
| site_id       | Integer  | Foreign Key ‚Üí `trackedurls.id`, Not Null, On Delete CASCADE     |
```

---

### –°–≤—è–∑–∏

```markdown
- `users.username` ‚Üê `trackedurls.owner` ‚Äî –æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º
- `trackedurls.id` ‚Üê `trackhistory.site_id` ‚Äî –æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º
```

## üì° API –º–µ—Ç–æ–¥—ã

–í—Å–µ –º–µ—Ç–æ–¥—ã, –∫—Ä–æ–º–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –ª–æ–≥–∏–Ω–∞, —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫:


| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å             | –û–ø–∏—Å–∞–Ω–∏–µ                                      |
|-------|------------------|-----------------------------------------------|
| `POST`   | `/register`        | üîê –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è              |
| `POST`   | `/token`           | üîë –ü–æ–ª—É—á–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞ –ø–æ –ª–æ–≥–∏–Ω—É –∏ –ø–∞—Ä–æ–ª—é      |
| `POST`   | `/refresh`         | ‚ôªÔ∏è –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ refresh_token     |
| `GET`    | `/urls`            | üìÑ –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö URL             |
| `POST`   | `/urls`            | ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ URL –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥           |
| `GET`    | `/urls/{id}`       | üîç –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± URL –ø–æ `id`          |
| `PATCH`  | `/urls/{id}`       | ‚è± –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞              |
| `DELETE` | `/urls/{id}`       | üóë –£–¥–∞–ª–µ–Ω–∏–µ URL –∏–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞                  |
| `GET`    | `/history`         | üïì –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø–æ `id` URL       |

---

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 

| –ü—É—Ç—å         | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã                  |
|--------------|----------------------------|
| POST /register | `username`: string<br>`password`: string |


**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "username": "user99999",
  "password": "secure_password"
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏ —É–¥–∞—á–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:**
```json
{
  "access_token": "jwt",
  "refresh_token": "jwt",
  "token_type": "bearer"
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞ –ø–æ –ª–æ–≥–∏–Ω—É –∏ –ø–∞—Ä–æ–ª—é

| –ü—É—Ç—å        | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã                  |
|-------------|----------------------------|
| POST /token | `username`: string<br>`password`: string |

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "username": "exampleuser",
  "password": "securepassword"
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "access_token": "jwt",
  "refresh_token": "jwt",
  "token_type": "bearer"
}
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ refresh_token

| –ü—É—Ç—å         | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã                       | 
|--------------|----------------------------------|
| POST /refresh | `refresh_token`: string         |

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "refresh_token": "jwt"
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "access_token": "jwt",
  "refresh_token": "jwt",
  "token_type": "bearer"
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö URL

| –ü—É—Ç—å         | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã                       | 
|--------------|----------------------------------|
| GET /urls | `Authorization`: string ( –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ )        |

---

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ URL –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

| –ü—É—Ç—å       | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã  |     
|------------|------------|
| POST /urls | `Authorization`: string (–≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ)<br>`url`: string<br>`interval`: integer |

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (POST):**
```json
{
  "url": "https://example.com",
  "interval": 10
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± URL –ø–æ id

| –ü—É—Ç—å            | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã      | 
|-----------------|----------------|
| GET /urls/{id}  | `id`: integer (–≤ path)<br>`Authorization`: string (–≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ) |


### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

| –ü—É—Ç—å              | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã       |
|-------------------|-----------------|
| PATCH /urls/{id}  | `id`: integer (–≤ path)<br>`Authorization`: string (–≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ)<br>`interval`: integer |

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "interval": 15
}
```

### –£–¥–∞–ª–µ–Ω–∏–µ URL –∏–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

| –ü—É—Ç—å               | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã                                                   |
|--------------------|-------------------------------------------------------------|
| DELETE /urls/{id}  | `id`: integer (–≤ path)<br>`Authorization`: string (–≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ) |

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø–æ id URL

| –ü—É—Ç—å         | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã                  |
|--------------|----------------------------|
| GET /history | `Authorization`: string (–≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ)<br>`id`: integer/null<br>`limit`: integer/null (–≤ —Ç–µ–ª–µ) |

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**


**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "id": 1,
  "limit": 10
}
```
